var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},EndGate;(function(n){(function(t){var i=function(i){function r(r,u,f,e,o,s,h,c){var y,l,a,v,p;for(typeof h=="undefined"&&(h=!1),typeof c=="undefined"&&(c="gray"),i.call(this,new n.Vector2d(r,u)),this._type="Grid",this._size=new n.Size2d(o*e,s*f),this._tileSize=new n.Size2d(o,s),this._grid=[],this._rows=f,this._columns=e,this._drawGridLines=h,this._gridLines=[],y=this._size.Multiply(.5),l=new n.Vector2d(-y.Width,-y.Height),a=new n.Vector2d(y.Width,y.Height),v=0;v<f;v++)for(this._grid[v]=[],this._gridLines.push(new t.Line2d(l.X,l.Y+v*this._tileSize.Height,a.X,l.Y+v*this._tileSize.Height,1)),p=0;p<e;p++)v===0&&this._gridLines.push(new t.Line2d(l.X+p*this._tileSize.Width,l.Y,l.X+p*this._tileSize.Width,a.Y,1)),this._grid[v].push(null);this._gridLines.push(new t.Line2d(l.X,a.Y,a.X,a.Y,1)),this._gridLines.push(new t.Line2d(a.X,l.Y,a.X,a.Y,1)),this.Color(c)}return __extends(r,i),r.prototype.Color=function(n){if(typeof n!="undefined"){this._gridLineColor=n;for(var t=0;t<this._gridLines.length;t++)this._gridLines[t].Color(n)}return this._gridLineColor},r.prototype.Size=function(){return this._size.Clone()},r.prototype.TileSize=function(){return this._tileSize.Clone()},r.prototype.Rows=function(){return this._rows},r.prototype.Columns=function(){return this._columns},r.prototype.Opacity=function(n){return this.State.GlobalAlpha(n)},r.prototype.Fill=function(n,t,i){n--,t--,i.Position=this.GetInsideGridPosition(n,t),this._grid[n][t]=i,this.AddChild(i)},r.prototype.FillSpace=function(n,t,i){var f,r,u;for(n--,t--,r=0;r<i.length;r++)for(u=0;u<i[r].length;u++)f=i[r][u],f.Position=this.GetInsideGridPosition(r+n,u+t),this._grid[r+n][u+t]=f,this.AddChild(f)},r.prototype.FillRow=function(n,t,i){var u,r;for(typeof i=="undefined"&&(i=0),n--,r=0;r<t.length;r++)u=t[r],u.Position=this.GetInsideGridPosition(n,r+i),this._grid[n][r+i]=u,this.AddChild(u)},r.prototype.FillColumn=function(n,t,i){var u,r;for(typeof i=="undefined"&&(i=0),n--,r=0;r<t.length;r++)u=t[r],u.Position=this.GetInsideGridPosition(r+i,n),this._grid[r+i][n]=u,this.AddChild(u)},r.prototype.Get=function(n,t){return this._grid[n-1][t-1]},r.prototype.GetColumn=function(n){var i=[],t;for(n--,t=0;t<this._rows;t++)i.push(this._grid[t][n]);return i},r.prototype.GetRow=function(n){var i=[],t;for(n--,t=0;t<this._columns;t++)i.push(this._grid[n][t]);return i},r.prototype.GetSpace=function(n,t,i,r){for(var e=[],o=i>=n?1:-1,s=r>=t?1:-1,f,u=n;u!==i+o;u+=o){if(u>this._rows)break;for(f=t;f!==r+s;f+=s){if(f>this._columns)break;e.push(this._grid[u-1][f-1])}}return e},r.prototype.Clear=function(n,t){var i=this._grid[n-1][t-1];return this._grid[n-1][t-1]=null,this.RemoveChild(i),i},r.prototype.ClearRow=function(n){var i=[],t;for(n--,t=0;t<this._columns;t++)i.push(this._grid[n][t]),this.RemoveChild(this._grid[n][t]),this._grid[n][t]=null;return i},r.prototype.ClearColumn=function(n){var i=[],t;for(n--,t=0;t<this._rows;t++)i.push(this._grid[t][n]),this.RemoveChild(this._grid[t][n]),this._grid[t][n]=null;return i},r.prototype.ClearSpace=function(n,t,i,r){for(var e=[],o=i>=n?1:-1,s=r>=t?1:-1,f,u=n;u!==i+o;u+=o){if(u>this._rows)break;for(f=t;f!==r+s;f+=s){if(f>this._columns)break;e.push(this._grid[u-1][f-1]),this.RemoveChild(this._grid[u-1][f-1]),this._grid[u-1][f-1]=null}}return e},r.prototype.Draw=function(n){if(i.prototype.StartDraw.call(this,n),n.save(),i.prototype.EndDraw.call(this,n),this._drawGridLines)for(var t=0;t<this._gridLines.length;t++)this._gridLines[t].Draw(n);n.restore()},r.prototype.GetDrawBounds=function(){var t=new n.Bounds.BoundingRectangle(this.Position,this._size);return t.Rotation=this.Rotation,t},r.prototype.ConvertToRow=function(n){return Math.floor(1+(n-(this.Position.Y-this._size.HalfHeight()))/this._tileSize.Height)},r.prototype.ConvertToColumn=function(n){return Math.floor(1+(n-(this.Position.X-this._size.HalfWidth()))/this._tileSize.Width)},r.prototype.GetInsideGridPosition=function(t,i){return new n.Vector2d(i*this._tileSize.Width-this._size.HalfWidth()+this._tileSize.HalfWidth(),t*this._tileSize.Height-this._size.HalfHeight()+this._tileSize.HalfHeight())},r}(t.Abstractions.Graphic2d);t.Grid=i})(n.Graphics||(n.Graphics={}));var t=n.Graphics})(EndGate||(EndGate={}))