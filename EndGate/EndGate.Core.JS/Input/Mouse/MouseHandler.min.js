var EndGate;(function(n){(function(t){var i=function(){function i(t){var i=this;this._target=t,this.OnClick=new n.EventHandler,this.OnDoubleClick=new n.EventHandler,this.OnDown=new n.EventHandler,this.OnUp=new n.EventHandler,this.OnMove=new n.EventHandler,this.OnScroll=new n.EventHandler,this.LeftIsDown=!1,this.MiddleIsDown=!1,this.RightIsDown=!1,this.Wire(),this.OnDown.Bind(function(n){i.IsDown=!0,i[n.Button+"IsDown"]=!0}),this.OnUp.Bind(function(n){i.IsDown=!1,i[n.Button+"IsDown"]=!1})}return i.MouseButtonArray=[null,t.MouseButton.Left,t.MouseButton.Middle,t.MouseButton.Right],i.prototype.Wire=function(){var n=this;this._target.addEventListener("click",this._target.oncontextmenu=this.BuildEvent(this.OnClick,this.BuildMouseClickEvent),!1),this._target.addEventListener("dblclick",this.BuildEvent(this.OnDoubleClick,this.BuildMouseClickEvent),!1),this._target.addEventListener("mousedown",this.BuildEvent(this.OnDown,this.BuildMouseClickEvent),!1),this._target.addEventListener("mouseup",this.BuildEvent(this.OnUp,this.BuildMouseClickEvent),!1),this._target.addEventListener("mousemove",this.BuildEvent(this.OnMove,this.BuildMouseEvent),!1),/MSIE/i.test(navigator.userAgent)?this._target.addEventListener("wheel",this.BuildEvent(this.OnScroll,function(t){return t.wheelDeltaX=-t.deltaX,t.wheelDeltaY=-t.deltaY,n.BuildMouseScrollEvent(t)}),!1):/Firefox/i.test(navigator.userAgent)?this._target.addEventListener("DOMMouseScroll",this.BuildEvent(this.OnScroll,function(t){return t.wheelDeltaX=t.axis===1?-t.detail:0,t.wheelDeltaY=t.axis===2?-t.detail:0,n.BuildMouseScrollEvent(t)}),!1):this._target.addEventListener("mousewheel",this.BuildEvent(this.OnScroll,this.BuildMouseScrollEvent),!1)},i.prototype.BuildEvent=function(n,t,i){typeof i=="undefined"&&(i=!1);var r=this;return function(u){return n.HasBindings()&&(n.Trigger(t.call(r,u)),u.preventDefault()),i}},i.prototype.BuildMouseScrollEvent=function(n){return{Position:this.GetMousePosition(n),Direction:this.GetMouseScrollDierction(n)}},i.prototype.BuildMouseEvent=function(n){return{Position:this.GetMousePosition(n)}},i.prototype.BuildMouseClickEvent=function(n){return{Position:this.GetMousePosition(n),Button:this.GetMouseButton(n)}},i.prototype.GetMousePosition=function(t){return new n.Vector2d(t.offsetX?t.offsetX:t.pageX-this._target.offsetLeft,t.offsetY?t.offsetY:t.pageY-this._target.offsetTop)},i.prototype.GetMouseButton=function(n){return n.which?i.MouseButtonArray[n.which]:t.MouseButton.Right},i.prototype.GetMouseScrollDierction=function(t){return new n.Vector2d(-Math.max(-1,Math.min(1,t.wheelDeltaX)),-Math.max(-1,Math.min(1,t.wheelDeltaY)))},i}();t.MouseHandler=i})(n.Input||(n.Input={}));var t=n.Input})(EndGate||(EndGate={}))