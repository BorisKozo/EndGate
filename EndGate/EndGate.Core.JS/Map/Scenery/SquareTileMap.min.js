var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},EndGate;(function(n){(function(t){var i=function(i){function r(t,r,u,f,e,o,s){typeof s=="undefined"&&(s=!1),i.call(this,t,r,e),this._grid=new n.Graphics.Grid(0,0,o.length,o[0].length,u,f,s),this.FillGridWith(o)}return __extends(r,i),r.ExtractTiles=function(n,t,i){for(var f=[],e=Math.floor(n.ClipSize.Width/t),o=Math.floor(n.ClipSize.Height/i),u,r=0;r<o;r++)for(u=0;u<e;u++)f.push(n.Extract(u*t,r*i,t,i));return f},r.prototype.Draw=function(n){i.prototype.StartDraw.call(this,n),this._grid.Draw(n),i.prototype.EndDraw.call(this,n)},r.prototype.GetDrawBounds=function(){var n=this._grid.GetDrawBounds();return n.Position=this.Position,n},r.prototype.FillGridWith=function(n){for(var u=[],r,i=0;i<n.length;i++)for(u[i]=[],r=0;r<n[i].length;r++)n[i][r]>=0?u[i].push(new t.Tile(this._Resources[n[i][r]],this._grid.TileSize().Width,this._grid.TileSize().Height)):u[i].push(null);this._grid.FillSpace(1,1,u)},r}(t.TileMap);t.SquareTileMap=i})(n.Map||(n.Map={}));var t=n.Map})(EndGate||(EndGate={}))