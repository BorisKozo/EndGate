var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},CollidableShape=function(n){function t(t,i){n.call(this,i),this._collisionBorderColor="black",this._collisionBorderThickness=4,this._lastCollision=null,this.Graphic=t,this.TextPosition=new eg.Graphics.Text2d(t.Position.X,t.Position.Y,t.Position.toString()),this.Graphic.BorderColor(this._collisionBorderColor),this.Graphic.BorderThickness(0)}return __extends(t,n),t.prototype.Move=function(n){this.Bounds.Position=this.Graphic.Position=this.TextPosition.Position=n,this.TextPosition.Position.Apply(Math.round),this.TextPosition.Text(this.TextPosition.Position.toString())},t.prototype.Rotate=function(n){this.Bounds.Rotation=this.Graphic.Rotation=this.TextPosition.Rotation=this.Graphic.Rotation+n},t.prototype.Collided=function(t){this.Graphic.BorderThickness(this._collisionBorderThickness),this._lastCollision=t,n.prototype.Collided.call(this,t)},t.prototype.Update=function(){this._lastCollision!==null&&(this._lastCollision.With.IsCollidingWith(this)||(this.Graphic.BorderThickness(0),this._lastCollision=null))},t}(eg.Collision.Collidable),CollidableRectangle=function(n){function t(t,i,r,u,f){n.call(this,new eg.Graphics.Rectangle(t,i,r,u,f),new eg.Bounds.BoundingRectangle(new eg.Vector2d(t,i),new eg.Size2d(r,u)))}return __extends(t,n),t}(CollidableShape),CollidableCircle=function(n){function t(t,i,r,u){n.call(this,new eg.Graphics.Circle(t,i,r,u),new eg.Bounds.BoundingCircle(new eg.Vector2d(t,i),r))}return __extends(t,n),t}(CollidableShape),CollisionInspector=function(n){function t(t){var i=this;n.call(this,t),this._collidableShapes=[],this._draggingObject=null,this._rotatingObject=null,this._decreasingZIndex=0,this.Input.Mouse.OnDown.Bind(function(n){var t=i.GetShapeAt(n.Position);t!==null&&(n.Button==="Left"?(i._draggingObject=t,i._dragOffset=n.Position.Subtract(t.Bounds.Position)):n.Button==="Right"&&(i._rotatingObject=t))}),this.Input.Mouse.OnUp.Bind(function(){i._draggingObject=null,i._dragOffset=null,i._rotatingObject=null}),this.Input.Mouse.OnMove.Bind(function(n){i._currentMousePosition=n.Position})}return __extends(t,n),t.prototype.Add=function(n){this._collidableShapes.push(n),n.Graphic.ZIndex=n.TextPosition.ZIndex=this._decreasingZIndex--,this.Scene.Add(n.Graphic),this.Scene.Add(n.TextPosition),this.CollisionManager.Monitor(n)},t.prototype.Update=function(n){var r,u,i,t;for(this._draggingObject!==null?this._draggingObject.Move(this._currentMousePosition.Add(this._dragOffset.Negate())):this._rotatingObject!==null&&(i=this._currentMousePosition.Subtract(this._rotatingObject.Bounds.Position),r=i.Magnitude()/100,u=i.Sign().X,this._rotatingObject.Rotate(r*n.ElapsedSecond*u)),t=0;t<this._collidableShapes.length;t++)this._collidableShapes[t].Update(n)},t.prototype.GetShapeAt=function(n){for(var t=0;t<this._collidableShapes.length;t++)if(this._collidableShapes[t].Bounds.ContainsPoint(n))return this._collidableShapes[t];return null},t}(eg.Game)