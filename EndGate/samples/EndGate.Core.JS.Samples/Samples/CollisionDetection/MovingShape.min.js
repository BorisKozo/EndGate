var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},MovingShape=function(n){function t(t,i,r){n.call(this,t.GetDrawBounds()),this.Graphic=t,this._velocity=i,this._directionInterval=r,this._lastChangedDirection=(new Date).getTime(),this._rotationMultiplier=1,this._fadeSpeed=2,this._collisionBorderThickness=5,this._collisionColorAlpha=0,this._collisionColor=[255,0,0],this.Graphic.Border(this._collisionBorderThickness,"rgba("+this._collisionColor+",0,0,"+this._collisionColorAlpha+")")}return __extends(t,n),t.RotationSpeed=Math.PI,t.prototype.Collided=function(t){var r,i;for(this._collisionColorAlpha=1,r=t.With.Graphic.Color().replace("rgb(","").replace(")","").split(","),i=0;i<r.length;i++)this._collisionColor[i]=parseInt(r[i]);n.prototype.Collided.call(this,t)},t.prototype.Update=function(n){n.Now.getTime()-this._lastChangedDirection>=this._directionInterval&&(this._velocity=this._velocity.Multiply(-1),this._rotationMultiplier*=-1,this._lastChangedDirection=n.Now.getTime()),this._collisionColorAlpha=Math.max(this._collisionColorAlpha-n.ElapsedSecond*this._fadeSpeed,0),this.Graphic.BorderColor("rgba("+this._collisionColor[0]+","+this._collisionColor[1]+","+this._collisionColor[2]+","+this._collisionColorAlpha+")"),this.Graphic.Rotation=this.Bounds.Rotation=this.Graphic.Rotation+n.ElapsedSecond*t.RotationSpeed*this._rotationMultiplier,this.Graphic.Position=this.Bounds.Position=this.Graphic.Position.Add(this._velocity.Multiply(n.ElapsedSecond))},t}(eg.Collision.Collidable)