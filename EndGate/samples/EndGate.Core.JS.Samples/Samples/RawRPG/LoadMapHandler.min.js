var LoadMapHandler=function(){function n(n,t,i,r,u,f,e){var h=$("#savedMaps"),c=$("#loadMap"),l=localStorage.getItem("mapBuilder"),o,s=[],a;o=l&&l.length>0?JSON.parse(l):{},o.Default={Rows:i,Columns:r,TileSize:u,SpriteSheetUrl:f,Layers:[{Name:"Default",Layer:e}]};for(a in o)h.append($("<option value='"+a+"'>"+a+"<\/option>")),c.removeClass("disabled");h.val("Default"),c.click(function(){for(var i,u,r=0;r<s.length;r++)n.RemoveLayer(s[r]);s=[],i=o[h.val()],u=new eg.Graphics.Assets.ImageSource("images/wood_tileset_3.png"),u.OnLoaded.Bind(function(){for(var e=eg.Map.SquareTileMap.ExtractTiles(u,i.TileSize.Width,i.TileSize.Height),f,r=0;r<i.Layers.length;r++)f=new eg.Map.SquareTileMap(t.X,t.Y,i.TileSize.Width,i.TileSize.Height,e,i.Layers[r].Layer),s.push(f),n.AddLayer(f)})}),c.click()}return n}()