var KnightAnimationHandler=function(){function n(t){var r=this,i;for(this._knight=t,this._animations={},i=0;i<n._animationDirectionMap.length;i++)this._animations[n._animationDirectionMap[i]]=new eg.Graphics.SpriteAnimation(t.Graphic.Image,18,new eg.Size2d(64,64),9,new eg.Vector2d(0,i*64));this._knight.MovementController.OnMove.Bind(function(n){r.KnightMove(n)}),this._movementList=[],this._currentAnimation=this._animations.Up,this._currentAnimation.Stop()}return n._animationDirectionMap=["Up","Left","Down","Right"],n.prototype.KnightMove=function(n){var i=this._knight.MovementController.Velocity.Sign(),t;n.StartMoving===!1&&this._animations[n.Direction]===this._currentAnimation&&this._currentAnimation.Stop(),i.X===-1?t=this._animations.Left:i.X===1&&(t=this._animations.Right),i.Y===-1?t=this._animations.Up:i.Y===1&&(t=this._animations.Down),t&&(this._currentAnimation.Stop(),this._currentAnimation=t,this._currentAnimation.Play(!0))},n.prototype.Update=function(n){this._currentAnimation.Update(n)},n}()