var TileSelector=function(){function n(t,i,r,u,f){var l;this._grid=t;var e=this,h=t.Children(),c,o=[],a,s=!1;for(this.GroupSelector=new eg.Graphics.Rectangle(0,0,0,0,"rgb(100, 255, 0)"),this.GroupSelector.Border(2,"green"),this.GroupSelector.Opacity(.4),this.SelectedTiles=[],l=0;l<h.length;l++)c=h[l].GetDrawBounds(),c.Position=c.Position.Add(t.Position),o.push(c);f.OnDown.Bind(function(n){a=r.ToCameraRelative(n.Position)}),f.OnUp.Bind(function(){window.setTimeout(function(){s=!1},50),i.Remove(e.GroupSelector)}),f.OnMove.Bind(function(t){var u;t.Position=r.ToCameraRelative(t.Position),f.LeftIsDown&&!s&&t.Position.Distance(a).Magnitude()>=n._groupSelectAfter&&(s=!0,i.Add(e.GroupSelector)),s&&(u=t.Position.Subtract(a),e.GroupSelector.Size=new eg.Size2d(Math.abs(u.X),Math.abs(u.Y)),e.GroupSelector.Position=t.Position.Subtract(e.GroupSelector.Size.Multiply(.5).Multiply(u.Sign())))}),f.OnClick.Bind(function(n){var c=r.ToCameraRelative(n.Position),i=[],u=[],f,t;if(s)for(f=e.GroupSelector.GetDrawBounds(),t=0;t<o.length;t++)o[t].Intersects(f)&&(i.push(o[t]),u.push(h[t]));else for(t=0;t<o.length;t++)if(o[t].ContainsPoint(c)){i.push(o[t]),u.push(h[t]);break}n.Button==="Left"?e.Select(u,i):n.Button==="Right"&&e.Unselect()})}return n._groupSelectAfter=10,n.prototype.Select=function(n,t){for(var r,u,i=0;i<this.SelectedTiles.length;i++)this._grid.RemoveChild(this.SelectedTiles[i]);for(this.SelectedTiles=[],i=0;i<t.length;i++)u=t[i].Position.Subtract(this._grid.Position),r=new eg.Graphics.Rectangle(u.X,u.Y,t[i].Size.Width,t[i].Size.Height),r.Border(2,"red"),this._grid.AddChild(r),this.SelectedTiles.push(r)},n.prototype.Unselect=function(){},n}()