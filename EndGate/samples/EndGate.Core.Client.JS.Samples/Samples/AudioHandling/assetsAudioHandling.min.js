var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},Animation=function(){function n(n,t,i,r,u,f,e,o,s,h,c,l){typeof c=="undefined"&&(c=!0),typeof l=="undefined"&&(l=!1),this._spriteSheet=new eg.Graphics.Assets.ImageSource(n,r,u,0,0),this._animation=new eg.Graphics.SpriteAnimation(this._spriteSheet,o,new eg.Size2d(f,e),s),this._sprite=new eg.Graphics.Sprite2d(t,i,this._spriteSheet,f,e),this._animation.OnComplete.Bind(h),l&&(this._sprite.Rotation=Math.random()*Math.twoPI+-Math.PI),this.Graphic=this._sprite,this._animation.Play(c)}return n.prototype.Update=function(n){this._animation.Update(n)},n}(),BurningFlame=function(n){function t(t,i){n.call(this,"images/burning_flame.png",t,i,768,128,128,128,16,6,function(){})}return __extends(t,n),t}(Animation),SmokePoof=function(n){function t(t,i,r){n.call(this,"images/smoke_poof.png",t,i,1280,128,128,128,20,10,r,!1,!0)}return __extends(t,n),t}(Animation),SmokePoofManager=function(){function n(n,t,i){var u,r;this._mouse=n,this._scene=t,this._onClickSound=i,u=this,this._smokePoofIds=0,r=this,this._smokePoofs={},this._mouse.OnClick.Bind(function(n){var i=r._smokePoofIds++,t;t=new SmokePoof(n.Position.X,n.Position.Y,function(){delete r._smokePoofs[i],r._scene.Remove(t.Graphic)}),u._onClickSound.Play().Seek(.1),r._smokePoofs[i]=t,r._scene.Add(t.Graphic)})}return n.prototype.Update=function(n){for(var t in this._smokePoofs)this._smokePoofs[t].Update(n)},n}(),AudioHandler=function(n){function t(t){n.call(this,t),this._burningFlame=new BurningFlame(t.width/2,t.height/2),this.Scene.Add(this._burningFlame.Graphic),this.Audio.Load("burning",["sounds/fireburning.ogg","sounds/fireburning.mp3"]),this._smokePoofManager=new SmokePoofManager(this.Input.Mouse,this.Scene,this.Audio.Load("poof",["sounds/smokepoof.ogg","sounds/smokepoof.mp3"])),this._burningSound=this.Audio.Play("burning",new eg.Sound.AudioSettings(!0,75))}return __extends(t,n),t.prototype.Update=function(n){this._burningFlame.Update(n),this._smokePoofManager.Update(n)},t}(eg.Game)