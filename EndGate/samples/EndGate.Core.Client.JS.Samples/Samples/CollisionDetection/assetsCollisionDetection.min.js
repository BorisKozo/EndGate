var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},MovingShape=function(n){function t(t,i,r){n.call(this,t),this._fadeSpeed=2,this._collisionBorderThickness=5,this._collisionColorAlpha=0,this._collisionColor=[255,0,0],this.Graphic=t,this._velocity=i,this._directionInterval=r,this._lastChangedDirection=(new Date).getTime(),this._rotationMultiplier=t._type==="Circle"?0:1,this.Graphic.Border(this._collisionBorderThickness,"rgba("+this._collisionColor+",0,0,"+this._collisionColorAlpha+")")}return __extends(t,n),t.RotationSpeed=Math.PI,t.prototype.Collided=function(t){var r,i;for(this._collisionColorAlpha=1,r=t.With.Graphic.Color().replace("rgb(","").replace(")","").split(","),i=0;i<r.length;i++)this._collisionColor[i]=parseInt(r[i]);n.prototype.Collided.call(this,t)},t.prototype.Update=function(n){n.Now.getTime()-this._lastChangedDirection>=this._directionInterval&&(this._velocity=this._velocity.Multiply(-1),this._rotationMultiplier*=-1,this._lastChangedDirection=n.Now.getTime()),this._collisionColorAlpha=Math.max(this._collisionColorAlpha-n.ElapsedSecond*this._fadeSpeed,0),this.Graphic.BorderColor("rgba("+this._collisionColor[0]+","+this._collisionColor[1]+","+this._collisionColor[2]+","+this._collisionColorAlpha+")"),this.Graphic.Rotation=this.Rotation=this.Rotation+n.ElapsedSecond*t.RotationSpeed*this._rotationMultiplier,this.Graphic.Position=this.Position=this.Graphic.Position.Add(this._velocity.Multiply(n.ElapsedSecond))},t}(EndGate.Core.Collision.Collidable),GraphicsRenderer=function(n){function t(t){n.call(this,t),this._width=t.width,this._height=t.height,this._shapes=[]}return __extends(t,n),t.MaxVelocity=100,t.MinVelocity=30,t.MinIntervalChange=1e3,t.MaxIntervalChange=4e3,t.prototype.Update=function(n){for(var t=0;t<this._shapes.length;t++)this._shapes[t].Update(n)},t.prototype.Clear=function(){for(var n=0;n<this._shapes.length;n++)this.Scene.Remove(this._shapes[n].Graphic);this._shapes=[]},t.prototype.AddRandomRectangle=function(){var t=this.GetRandomPosition(),i=this.GetRandomSize(),u=this.GetRandomVelocity(),f=this.GetRandomIntervalChange(),r=new EndGate.Core.Graphics.Shapes.Rectangle(t.X,t.Y,i.Width,i.Height,this.GetRandomColor()),n;n=new MovingShape(r,u,f),this._shapes.push(n),this.Scene.Add(r),this.CollisionManager.Monitor(n)},t.prototype.AddRandomCircle=function(){var t=this.GetRandomPosition(),r=this.GetRandomRadius(),u=this.GetRandomVelocity(),f=this.GetRandomIntervalChange(),i=new EndGate.Core.Graphics.Shapes.Circle(t.X,t.Y,r,this.GetRandomColor()),n;n=new MovingShape(i,u,f),this._shapes.push(n),this.Scene.Add(i),this.CollisionManager.Monitor(n)},t.prototype.GetRandomPosition=function(){return new EndGate.Core.Assets.Vector2d(Math.floor(Math.random()*this._width+1),Math.floor(Math.random()*this._height+1))},t.prototype.GetRandomSize=function(){return new EndGate.Core.Assets.Size2d(Math.floor(Math.random()*this._width*.1+5),Math.floor(Math.random()*this._height*.1+5))},t.prototype.GetRandomRadius=function(){return Math.floor(Math.random()*this._width*.05)+5},t.prototype.GetRandomColor=function(){return"rgb("+(Math.floor(Math.random()*250)+1)+", "+(Math.floor(Math.random()*250)+1)+", "+(Math.floor(Math.random()*250)+1)+")"},t.prototype.GetRandomVelocity=function(){var i=["X","Y"][Math.floor(Math.random()*2)],n=EndGate.Core.Assets.Vector2d.Zero();return n[i]=Math.floor(Math.random()*t.MaxVelocity)+t.MinVelocity,n},t.prototype.GetRandomIntervalChange=function(){return Math.floor(Math.random()*t.MaxIntervalChange)+t.MinIntervalChange},t}(EndGate.Core.Game)