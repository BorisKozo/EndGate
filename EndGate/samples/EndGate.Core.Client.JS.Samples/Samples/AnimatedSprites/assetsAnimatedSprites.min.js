var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},Animation=function(){function n(n,t,i,r,u,f,e,o,s,h){this._spriteSheet=new eg.Graphics.Assets.ImageSource(n,r,u,0,0),this._animation=new eg.Graphics.SpriteAnimation(this._spriteSheet,o,new eg.Size2d(f,e),s),this._sprite=new eg.Graphics.Sprite2d(t,i,this._spriteSheet,f,e),this._animation.OnComplete.Bind(h),this._sprite.Rotation=Math.random()*Math.twoPI+-Math.PI,this.Graphic=this._sprite,this._animation.Play()}return n.prototype.Update=function(n){this._animation.Update(n)},n}(),FireExplosion=function(n){function t(t,i,r){n.call(this,"images/fire_explosion.png",t,i,1152,128,128,128,18,9,r)}return __extends(t,n),t}(Animation),ElectricPulse=function(n){function t(t,i,r){n.call(this,"images/electric_pulse.png",t,i,1152,128,128,128,20,10,r)}return __extends(t,n),t}(Animation),FireExplosionManager=function(){function n(n,t){this._mouse=n,this._scene=t,this._explosionIds=0;var i=this;this._explosions={},this._mouse.OnClick.Bind(function(n){var r=i._explosionIds++,t;t=new FireExplosion(n.Position.X,n.Position.Y,function(){delete i._explosions[r],i._scene.Remove(t.Graphic)}),i._explosions[r]=t,i._scene.Add(t.Graphic)})}return n.prototype.Update=function(n){for(var t in this._explosions)this._explosions[t].Update(n)},n}(),ElectricPulseManager=function(){function n(n,t){this._mouse=n,this._scene=t,this._electricPulseIds=0,this._pulseFrequency=100,this._lastPulse=0;var i=this;this._electricPulses={},this._mouse.OnMove.Bind(function(n){var r,t,u=(new Date).getTime();u-i._lastPulse>=i._pulseFrequency&&(i._lastPulse=u,r=i._electricPulseIds++,t=new ElectricPulse(n.Position.X,n.Position.Y,function(){delete i._electricPulses[r],i._scene.Remove(t.Graphic)}),i._electricPulses[r]=t,i._scene.Add(t.Graphic))})}return n.prototype.Update=function(n){for(var t in this._electricPulses)this._electricPulses[t].Update(n)},n}(),Animator=function(n){function t(t){n.call(this,t),this._fireExplosionManager=new FireExplosionManager(this.Input.Mouse,this.Scene),this._electricPulseManager=new ElectricPulseManager(this.Input.Mouse,this.Scene)}return __extends(t,n),t.prototype.Update=function(n){this._fireExplosionManager.Update(n),this._electricPulseManager.Update(n)},t}(eg.Game)