var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},ShapeBuilder=function(n){function t(t,i,r,u,f,e,o,s){n.call(this,t),this._canvas=t,this._syncSliders=s;var h=this,c=function(){$(this).hasClass("disabled")||(i.removeClass("disabled"),$(this).addClass("disabled"),h.BuildShape($(this)[0]))};$.each(i,function(n,t){$(t).click(c)}),$(i[0]).click(),this._shapeAnimator=new ShapeAnimator(r,u,f,e,o,this._syncSliders)}return __extends(t,n),t.prototype.Update=function(n){this._shapeAnimator.ApplyAnimation(this.Shape,n)},t.prototype.BuildShape=function(n){var r=$(n).attr("shape"),i=eg.Graphics[r],t;this.Shape?(r!=="Circle"?t=new i(this.Shape.Position.X,this.Shape.Position.Y,this.Shape.Radius*2,this.Shape.Radius*2):(t=new i(this.Shape.Position.X,this.Shape.Position.Y,Math.min(this.Shape.Size.Width,this.Shape.Size.Height)/2),window.setTimeout(function(n){return function(){n("Size")}}(this._syncSliders),0)),t.Color(this.Shape.Color()),t.Border(this.Shape.BorderThickness(),this.Shape.BorderColor()),t.Shadow(this.Shape.ShadowX(),this.Shape.ShadowY(),this.Shape.ShadowColor(),this.Shape.ShadowBlur()),t.Opacity(this.Shape.Opacity()),t.Rotation=this.Shape.Rotation,this.Scene.Remove(this.Shape)):t=new i(this._canvas.width/2,this._canvas.height/2,200,200),this.Shape=t,this.Scene.Add(this.Shape)},t}(eg.Game),ColorPicker=function(){function n(n,t,i,r,u){var o,e,f;for(this.red=n,this.green=t,this.blue=i,this.oncolorchange=u,o=this,e=function(){o.UpdateColor()},this.sliders=[this.red,this.green,this.blue],f=0;f<3;f++)this.sliders[f].slider({orientation:"horizontal",range:"min",max:255,value:r[f],animate:!0,slide:e,change:e});this.UpdateColor()}return n.prototype.UpdateColor=function(){var n=this.red.slider("value"),t=this.green.slider("value"),i=this.blue.slider("value");this.oncolorchange("rgb("+n+", "+t+", "+i+")")},n}(),CustomSlider=function(){function n(n,t,i,r,u){this._target=n,this._min=t,this._max=i,this._defaultValue=r,this.onsliderchange=u;var e=this,f=function(){e.SliderChange()};this._target.slider({orientation:"horizontal",range:"min",min:this._min,max:this._max,value:this._defaultValue,animate:!0,slide:f,change:f}),this.SliderChange()}return n.prototype.UpdateSlider=function(n){this._target.slider("value",n)},n.prototype.SliderChange=function(){this.onsliderchange(parseInt(this._target.slider("value")))},n}(),ShapeAnimator=function(){function n(n,t,i,r,u,f){this._defaultPosition=t,this._defaultSize=i,this._defaultRotation=r,this._defaultOpacity=u,this._syncSliders=f,this.Direction=1,this.CurrentAnimations={Position:!1,Rotation:!1,Size:!1,Opacity:!1};var e=this,o=function(){var n=$(this),t=n.attr("animation");n.hasClass("btn-success")?(e.CurrentAnimations[t]=!1,n.removeClass("btn-success")):(e.CurrentAnimations[t]=!0,n.addClass("btn-success"))};$.each(n,function(){$(this).click(o)}),this._lastChanged=(new Date).getTime()}return n.AnimationSpeed=50,n.RotationSpeed=Math.PI/4,n.ChangeDirectionEvery=3e3,n.prototype.ApplyAnimation=function(t,i){i.Now.getTime()-this._lastChanged>n.ChangeDirectionEvery&&(this.Direction*=-1,this._lastChanged=i.Now.getTime(),console.log("Changing direction: "+this.Direction));for(var r in this.CurrentAnimations)this.CurrentAnimations[r]&&(this[r](t,i),this._syncSliders(r))},n.prototype.Position=function(t,i){var u=n.AnimationSpeed*i.ElapsedSecond,r=t.Position.Subtract(this._defaultPosition).Abs().Sign();r.Magnitude()===0&&(r=eg.Vector2d.One()),t.Position=t.Position.Add(r.Multiply(this.Direction).Multiply(u))},n.prototype.Size=function(t,i){var r=n.AnimationSpeed*i.ElapsedSecond;t._type==="Circle"?t.Radius+=this.Direction*r:t.Size=t.Size.Add(this.Direction*r)},n.prototype.Rotation=function(t,i){var r=n.RotationSpeed*i.ElapsedSecond;t.Rotation+=1*this.Direction*r},n.prototype.Opacity=function(n,t){var i=.33*t.ElapsedSecond;n.Opacity(n.Opacity()+i*this.Direction),n.Opacity()>1&&n.Opacity(1)},n}()