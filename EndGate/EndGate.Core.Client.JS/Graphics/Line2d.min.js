var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},EndGate;(function(n){(function(t){var i=function(t){function i(i,r,u,f,e,o){typeof e=="undefined"&&(e=1),t.call(this,n.Vector2d.Zero()),this._type="Line2d",this._from=new n.Vector2d(i,r),this._to=new n.Vector2d(u,f),this.LineWidth(e),this.UpdatePosition(),typeof o!="undefined"&&this.Color(o)}return __extends(i,t),i.prototype.From=function(n){return this.GetOrSetLinePoint("from",n)},i.prototype.To=function(n){return this.GetOrSetLinePoint("to",n)},i.prototype.Color=function(n){return this.State.StrokeStyle(n)},i.prototype.LineWidth=function(n){return this.State.LineWidth(n)},i.prototype.LineCap=function(n){return this.State.LineCap(n)},i.prototype.Draw=function(n){t.prototype.StartDraw.call(this,n),this._cachedPosition.Equivalent(this.Position)||this.RefreshCache(),n.beginPath(),n.moveTo(this._from.X-this.Position.X,this._from.Y-this.Position.Y),n.lineTo(this._to.X-this.Position.X,this._to.Y-this.Position.Y),n.stroke(),t.prototype.EndDraw.call(this,n)},i.prototype.GetDrawBounds=function(){var t=new n.Bounds.BoundingRectangle(this.Position,new n.Size2d(this._boundsWidth,this.LineWidth()));return t.Rotation=Math.atan2(this._difference.Y,this._difference.X)+this.Rotation,t},i.prototype.UpdatePosition=function(){this.Position=this._from.Add(this._to).Divide(2),this._difference=this._to.Subtract(this._from),this._boundsWidth=this._from.Distance(this._to).Length(),this._cachedPosition=this.Position.Clone()},i.prototype.RefreshCache=function(){var n=this.Position.Subtract(this._cachedPosition);this._from.X+=n.X,this._from.Y+=n.Y,this._to.X+=n.X,this._to.Y+=n.Y,this._cachedPosition=this.Position.Clone()},i.prototype.GetOrSetLinePoint=function(n,t){return typeof t=="undefined"&&(this["_"+n]=t,this.UpdatePosition()),this["_"+n]},i}(t.Abstractions.Graphic2d);t.Line=i})(n.Graphics||(n.Graphics={}));var t=n.Graphics})(EndGate||(EndGate={}))