var EndGate,GameRunner;(function(n){(function(n){var t=function(){function t(){this._type="GameRunner",this._callbacks={},this._gameLoop=null,this._callbackCount=0}return t.prototype.Register=function(n){var t=this.CreateAndCacheCallback(n);return this.TryLoopStart(),this._gameLoop.AddCallback(t),this.CreateUpdateRateSetter(t)},t.prototype.Unregister=function(n){var t=this._callbacks[n.ID];this._gameLoop.RemoveCallback(t),this._callbackCount--,this.TryLoopStop()},t.prototype.TryLoopStart=function(){this._callbackCount===1&&(this._gameLoop=new n.Utilities.Looper,this._gameLoop.Start())},t.prototype.TryLoopStop=function(){this._callbackCount===0&&this._gameLoop!=null&&(this._gameLoop.Dispose(),this._gameLoop=null)},t.prototype.CreateAndCacheCallback=function(t){var i=new n.Utilities.LooperCallback(0,t.PrepareUpdate);return this._callbacks[t.ID]=i,this._callbackCount++,i},t.prototype.CreateUpdateRateSetter=function(n){return function(t){n.Fps=t}},t}();n.GameRunner=t})(n.Core||(n.Core={}));var t=n.Core})(EndGate||(EndGate={})),GameRunner=new EndGate.Core.GameRunner