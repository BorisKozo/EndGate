var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},GameRunnerInstance,EndGate;(function(n){(function(n){var t=function(){function n(){this._type="GameTime",this.Now=new Date,this._start=this.Now.getTime()}return n.prototype.Update=function(){var n=new Date,t=n.getTime();this.Elapsed=t-this.Now.getTime(),this.ElapsedSecond=this.Elapsed/1e3,this.Total=t-this._start,this.Now=n},n}();n.GameTime=t})(n.Core||(n.Core={}));var t=n.Core})(EndGate||(EndGate={})),function(n){(function(){})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function n(t){this._type="LooperCallback",this.Callback=t,this.ID=n._ids++}return n._ids=0,n}();n.LooperCallback=t})(n.Loopers||(n.Loopers={}));var t=n.Loopers})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(){})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(n){function t(t,i){n.call(this,i),this._type="TimedCallback",this.Fps=t,this.TimeoutID=0,this.Active=!1}return __extends(t,n),t}(n.LooperCallback);n.TimedCallback=t})(n.Loopers||(n.Loopers={}));var t=n.Loopers})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function n(){this._type="Looper",this._running=!1,this._callbacks=[]}return n.prototype.AddCallback=function(n){var t=this;this._callbacks.push(n),n.Active=!0,this._running&&window.setTimeout(function(){t.Loop(n)},0)},n.prototype.RemoveCallback=function(n){for(var t=0;t<this._callbacks.length;t++)if(this._callbacks[t].ID===n.ID){window.clearTimeout(n.TimeoutID),n.Active=!1,this._callbacks.splice(t,1);return}},n.prototype.Start=function(){this._running=!0,this.Run()},n.prototype.Run=function(){for(var t=this,n=0;n<this._callbacks.length;n++)window.setTimeout(function(n){return function(){t.Loop(t._callbacks[n])}}(n),0)},n.prototype.Loop=function(n){var t=this,i=1e3/n.Fps;n.Callback(),n.Active&&(n.TimeoutID=window.setTimeout(function(){t.Loop(n)},i))},n.prototype.Dispose=function(){for(var n=this._callbacks.length-1;n>=0;n--)this.RemoveCallback(this._callbacks[n]);this._callbacks=[],this._running=!1},n}();n.Looper=t})(n.Loopers||(n.Loopers={}));var t=n.Loopers})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),window.OnRepaintCompleted=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,0)}}(),function(n){(function(n){(function(n){var t=function(){function n(){this._type="RepaintLooper",this._running=!1,this._callbacksModified=!1,this._callbacks=[]}return n.prototype.Start=function(){this._running=!0,this.Run()},n.prototype.Run=function(){var t=this,n;if(this._running){for(this._callbacksModified=!1,n=0;n<this._callbacks.length;n++)if(this._callbacks[n].Callback(),this._callbacksModified)break;window.OnRepaintCompleted(function(){t.Run()})}},n.prototype.AddCallback=function(n){this._callbacksModified=!0,this._callbacks.push(n)},n.prototype.RemoveCallback=function(n){for(var t=0;t<this._callbacks.length;t++)if(this._callbacks[t].ID===n.ID){this._callbacksModified=!0,this._callbacks.splice(t,1);return}},n.prototype.Dispose=function(){this._callbacksModified=!0,this._callbacks=[],this._running=!1},n}();n.RepaintLooper=t})(n.Loopers||(n.Loopers={}));var t=n.Loopers})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){var t=function(){function n(n){this._defaultUpdateRate=40,this._updateRateSetter=n,this.UpdateRate(this._defaultUpdateRate)}return n.prototype.UpdateRate=function(n){if(typeof n!="undefined")this._updateRate=n,this._updateRateSetter(this._updateRate);else return this._updateRate},n}();n.GameConfiguration=t})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),Math.roundTo=function(n,t){var i=Math.pow(10,t);return Math.round(n*i)/i},Math.twoPI=Math.PI*2,function(n){(function(n){(function(n){var t=function(){function n(n,t){this._type="Vector2d",this.X=n||0,this.Y=t||0}return n.Zero=function(){return new n(0,0)},n.One=function(){return new n(1,1)},n.prototype.ProjectOnto=function(n){return n.Multiply(this.Dot(n)/n.Dot(n))},n.prototype.RotateAround=function(t,i,r){typeof r=="undefined"&&(r=2);var u=Math.cos(-i),f=Math.sin(-i);return new n(Math.roundTo(u*(this.X-t.X)-f*(this.Y-t.Y)+t.X,r),Math.roundTo(f*(this.X-t.X)+u*(this.Y-t.Y)+t.Y,r))},n.prototype.Apply=function(n){this.X=n(this.X),this.Y=n(this.Y)},n.prototype.Trigger=function(n){n(this.X),n(this.Y)},n.prototype.Normalized=function(){var t=this.Magnitude();return new n(this.X/t,this.Y/t)},n.prototype.Magnitude=function(){return Math.sqrt(this.X*this.X+this.Y*this.Y)},n.prototype.Length=function(){return this.Magnitude()},n.prototype.Dot=function(n){return n.X*this.X+n.Y*this.Y},n.prototype.Abs=function(){return new n(Math.abs(this.X),Math.abs(this.Y))},n.prototype.Sign=function(){return new n(this.X/Math.abs(this.X),this.Y/Math.abs(this.Y))},n.prototype.Distance=function(t){return new n(Math.abs(t.X-this.X),Math.abs(t.Y-this.Y))},n.prototype.Add=function(t){return t._type==="Vector2d"?new n(this.X+t.X,this.Y+t.Y):new n(this.X+t,this.Y+t)},n.prototype.Multiply=function(t){return t._type==="Vector2d"?new n(this.X*t.X,this.Y*t.Y):new n(this.X*t,this.Y*t)},n.prototype.Subtract=function(t){return t._type==="Vector2d"?new n(this.X-t.X,this.Y-t.Y):new n(this.X-t,this.Y-t)},n.prototype.SubtractFrom=function(t){return t._type==="Vector2d"?new n(t.X-this.X,t.Y-this.Y):new n(t-this.X,t-this.Y)},n.prototype.Divide=function(t){return t._type==="Vector2d"?new n(this.X/t.X,this.Y/t.Y):new n(this.X/t,this.Y/t)},n.prototype.DivideFrom=function(t){return t._type==="Vector2d"?new n(t.X/this.X,t.Y/this.Y):new n(t/this.X,t/this.Y)},n.prototype.Negate=function(){return new n(this.X*-1,this.Y*-1)},n.prototype.Equivalent=function(n){return this.X===n.X&&this.Y===n.Y},n.prototype.Clone=function(){return new n(this.X,this.Y)},n.prototype.toString=function(){return"("+this.X+", "+this.Y+")"},n}();n.Vector2d=t})(n.Assets||(n.Assets={}));var t=n.Assets})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(t){var i=function(){function t(){this.Position=n.Assets.Vector2d.Zero(),this.Rotation=0}return t.prototype.ContainsPoint=function(){throw new Error("This method is abstract!");},t.prototype.Intersects=function(n){if(n._type==="BoundingCircle")return this.IntersectsCircle(n);if(n._type==="BoundingRectangle")return this.IntersectsRectangle(n);throw new Error("Cannot intersect with unidentifiable object, must be BoundingCircle or BoundingRectangle");},t.prototype.IntersectsCircle=function(){throw new Error("This method is abstract!");},t.prototype.IntersectsRectangle=function(){throw new Error("This method is abstract!");},t}();t.Bounds2d=i})(n.BoundingObject||(n.BoundingObject={}));var t=n.BoundingObject})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function n(){this._type="Event",this._actions=[]}return n.prototype.Bind=function(n){this._actions.push(n)},n.prototype.Unbind=function(n){for(var t=0;t<this._actions.length;t++)if(this._actions[t]===n){this._actions.splice(t,1);return}},n.prototype.Trigger=function(){for(var i=[],t,n=0;n<arguments.length-0;n++)i[n]=arguments[n+0];for(t=0;t<this._actions.length;t++)this._actions[t].apply(this,i)},n}();n.EventHandler=t})(n.Utilities||(n.Utilities={}));var t=n.Utilities})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function n(n,t){this.At=n,this.With=t}return n}();n.CollisionData=t})(n.Collision||(n.Collision={}));var t=n.Collision})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(t){var i=function(){function t(i){this._type="Collidable",this._disposed=!1,this.Bounds=i,this.ID=t._collidableIDs++,this.OnCollision=new n.Utilities.EventHandler,this.OnDisposed=new n.Utilities.EventHandler}return t._collidableIDs=0,t.prototype.IsCollidingWith=function(n){return this.Bounds.Intersects(n.Bounds)},t.prototype.Collided=function(n){this.OnCollision.Trigger(n)},t.prototype.Dispose=function(){if(this._disposed)throw new Error("Cannot dispose collidable twice.");else this._disposed=!0,this.OnDisposed.Trigger(this)},t}();t.Collidable=i})(n.Collision||(n.Collision={}));var t=n.Collision})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(t){var i=function(){function i(){this._type="CollisionManager",this._collidables=[],this._enabled=!1,this.OnCollision=new n.Utilities.EventHandler}return i.prototype.Monitor=function(n){var t=this;this._enabled=!0,n.OnDisposed.Bind(function(){t.Unmonitor(n)}),this._collidables.push(n)},i.prototype.Unmonitor=function(n){for(var t=0;t<this._collidables.length;t++)if(this._collidables[t].ID===n.ID){this._collidables.splice(t,1);break}},i.prototype.Update=function(){var n,i,r,u;if(this._enabled)for(r=0;r<this._collidables.length;r++)for(n=this._collidables[r],u=r+1;u<this._collidables.length;u++)i=this._collidables[u],n.IsCollidingWith(i)&&(n.Collided(new t.CollisionData(n.Bounds.Position.Clone(),i)),i.Collided(new t.CollisionData(i.Bounds.Position.Clone(),n)),this.OnCollision.Trigger(n,i))},i}();t.CollisionManager=i})(n.Collision||(n.Collision={}));var t=n.Collision})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(){})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function n(n){this._visibleCanvas=n,this._visibleContext=n.getContext("2d"),this._bufferCanvas=document.createElement("canvas"),this._bufferContext=this._bufferCanvas.getContext("2d"),this.UpdateBufferSize(),this._disposed=!1}return n._zindexSort=function(n,t){return n.ZIndex-t.ZIndex},n.prototype.Render=function(t){(this._bufferCanvas.width!==this._visibleCanvas.width||this._bufferCanvas.height!==this._visibleCanvas.height)&&this.UpdateBufferSize(),t.sort(n._zindexSort),this._bufferContext.clearRect(0,0,this._bufferCanvas.width,this._bufferCanvas.height);for(var i=0;i<t.length;i++)t[i].Draw(this._bufferContext);this._visibleContext.clearRect(0,0,this._visibleCanvas.width,this._visibleCanvas.height),this._visibleContext.drawImage(this._bufferCanvas,0,0)},n.prototype.Dispose=function(){this._disposed||(this._disposed=!0,this._visibleCanvas.parentNode.removeChild(this._visibleCanvas))},n.prototype.UpdateBufferSize=function(){this._bufferCanvas.width=this._visibleCanvas.width,this._bufferCanvas.height=this._visibleCanvas.height},n}();n.Renderer2d=t})(n.Rendering||(n.Rendering={}));var t=n.Rendering})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function t(t){this._type="Scene",this._actors=[],typeof t=="undefined"&&(t=this.CreateDefaultDrawArea()),this._renderer=new n.Renderer2d(t),this._disposed=!1}return t.prototype.Add=function(n){this._actors.push(n)},t.prototype.Remove=function(n){for(var t=0;t<this._actors.length;t++)if(this._actors[t]===n){this._actors.splice(t,1);return}},t.prototype.Draw=function(){this._renderer.Render(this._actors)},t.prototype.Dispose=function(){this._disposed||(this._disposed=!0,this._actors=[],this._renderer.Dispose())},t.prototype.CreateDefaultDrawArea=function(){var n=document.createElement("canvas");return n.width=window.innerWidth,n.height=window.innerHeight,document.getElementsByTagName("body")[0].appendChild(n),n},t}();n.Scene=t})(n.Rendering||(n.Rendering={}));var t=n.Rendering})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){var t=function(){function t(i){this._type="Game",this._gameTime=new n.GameTime,this.ZIndex=-1e3,this.ID=t._gameIds++,this.Scene=new n.Rendering.Scene(i),this.Scene.Add(this),this.CollisionManager=new n.Collision.CollisionManager,this.Configuration=new n.GameConfiguration(GameRunnerInstance.Register(this))}return t._gameIds=0,t.prototype.PrepareUpdate=function(){this._gameTime.Update(),this.CollisionManager.Update(this._gameTime),this.Update(this._gameTime)},t.prototype.Update=function(){},t.prototype.PrepareDraw=function(){this.Scene.Draw()},t.prototype.Draw=function(){},t.prototype.Dispose=function(){this.Scene.Dispose(),GameRunnerInstance.Unregister(this)},t}();n.Game=t})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){var t=function(){function t(){this._type="GameRunner",this._updateCallbacks={},this._drawCallbacks={},this._updateLoop=null,this._drawLoop=null,this._callbackCount=0}return t.prototype.Register=function(n){var t=this.CreateAndCacheUpdateCallback(n),i=this.CreateAndCacheDrawCallback(n);return this._callbackCount++,this.TryLoopStart(),this._updateLoop.AddCallback(t),this._drawLoop.AddCallback(i),this.CreateUpdateRateSetter(t)},t.prototype.Unregister=function(n){var t,i;this._updateCallbacks[n.ID]&&(t=this._updateCallbacks[n.ID],i=this._drawCallbacks[n.ID],this._updateLoop.RemoveCallback(t),this._drawLoop.RemoveCallback(i),delete this._updateCallbacks[n.ID],delete this._drawCallbacks[n.ID],this._callbackCount--,this.TryLoopStop())},t.prototype.TryLoopStart=function(){this._callbackCount===1&&(this._updateLoop=new n.Loopers.Looper,this._updateLoop.Start(),this._drawLoop=new n.Loopers.RepaintLooper,this._drawLoop.Start())},t.prototype.TryLoopStop=function(){this._callbackCount===0&&this._updateLoop!=null&&(this._updateLoop.Dispose(),this._updateLoop=null,this._drawLoop.Dispose(),this._drawLoop=null)},t.prototype.CreateAndCacheUpdateCallback=function(t){var i=new n.Loopers.TimedCallback(0,function(){t.PrepareUpdate()});return this._updateCallbacks[t.ID]=i,i},t.prototype.CreateAndCacheDrawCallback=function(t){var i=new n.Loopers.LooperCallback(function(){t.PrepareDraw()});return this._drawCallbacks[t.ID]=i,i},t.prototype.CreateUpdateRateSetter=function(n){return function(t){n.Fps=t}},t}();n.GameRunner=t})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),GameRunnerInstance=new EndGate.Core.GameRunner,function(n){(function(n){(function(n){var t=function(){function n(n,t){this._type="Size2d",this.Width=n||0,this.Height=typeof t!="undefined"?t:this.Width}return n.Zero=function(){return new n(0,0)},n.One=function(){return new n(1,1)},n.prototype.Radius=function(){return.5*Math.sqrt(this.Width*this.Width+this.Height*this.Height)},n.prototype.HalfWidth=function(){return this.Width/2},n.prototype.HalfHeight=function(){return this.Height/2},n.prototype.Apply=function(n){this.Width=n(this.Width),this.Height=n(this.Height)},n.prototype.Trigger=function(n){n(this.Width),n(this.Height)},n.prototype.Add=function(t){return t._type==="Size2d"?new n(this.Width+t.Width,this.Height+t.Height):t._type==="Vector2d"?new n(this.Width+t.X,this.Height+t.Y):new n(this.Width+t,this.Height+t)},n.prototype.Multiply=function(t){return t._type==="Size2d"?new n(this.Width*t.Width,this.Height*t.Height):t._type==="Vector2d"?new n(this.Width*t.X,this.Height*t.Y):new n(this.Width*t,this.Height*t)},n.prototype.Subtract=function(t){return t._type==="Size2d"?new n(this.Width-t.Width,this.Height-t.Height):t._type==="Vector2d"?new n(this.Width-t.X,this.Height-t.Y):new n(this.Width-t,this.Height-t)},n.prototype.SubtractFrom=function(t){return t._type==="Size2d"?new n(t.Width-this.Width,t.Height-this.Height):t._type==="Vector2d"?new n(t.X-this.Width,t.Y-this.Height):new n(t-this.Width,t-this.Height)},n.prototype.Divide=function(t){return t._type==="Size2d"?new n(this.Width/t.Width,this.Height/t.Height):t._type==="Vector2d"?new n(this.Width/t.X,this.Height/t.Y):new n(this.Width/t,this.Height/t)},n.prototype.DivideFrom=function(t){return t._type==="Size2d"?new n(t.Width/this.Width,t.Height/this.Height):t._type==="Vector2d"?new n(t.X/this.Width,t.Y/this.Height):new n(t/this.Width,t/this.Height)},n.prototype.Negate=function(){return new n(this.Width*-1,this.Height*-1)},n.prototype.Equivalent=function(n){return this.Width===n.Width&&this.Height===n.Height},n.prototype.Clone=function(){return new n(this.Width,this.Height)},n.prototype.toString=function(){return"("+this.Width+", "+this.Height+")"},n}();n.Size2d=t})(n.Assets||(n.Assets={}));var t=n.Assets})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function n(n,t){this.Min=n,this.Max=t}return n}();n.MinMax=t})(n.Assets||(n.Assets={}));var t=n.Assets})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function t(){}return t.GetMinMaxProjections=function(t,i){for(var u=i[0].ProjectOnto(t).Dot(t),e=u,o,r,f=1;f<i.length;f++)o=i[f],r=o.ProjectOnto(t).Dot(t),r<u?u=r:r>e&&(e=r);return new n.MinMax(u,e)},t}();n.Vector2dHelpers=t})(n.Assets||(n.Assets={}));var t=n.Assets})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(t){var i=function(t){function i(n){t.call(this),this._type="BoundingCircle",this.Radius=n}return __extends(i,t),i.ClosestTo=function(n,t,i){return n<t.X?t.X:n>i.X?i.X:n},i.prototype.Area=function(){return Math.PI*this.Radius*this.Radius},i.prototype.Circumfrence=function(){return 2*Math.PI*this.Radius},i.prototype.IntersectsCircle=function(n){return this.Position.Distance(n.Position).Length()<this.Radius+n.Radius},i.prototype.IntersectsRectangle=function(t){var r=t.Rotation===0?this.Position:this.Position.RotateAround(t.Position,-t.Rotation),u=new n.Assets.Vector2d(t.Position.X-t.Size.HalfWidth(),t.Position.Y-t.Size.HalfHeight()),f=new n.Assets.Vector2d(t.Position.X+t.Size.HalfWidth(),t.Position.Y+t.Size.HalfHeight()),e=new n.Assets.Vector2d(i.ClosestTo(r.X,u,f),i.ClosestTo(r.Y,u,f));return r.Distance(e).Magnitude()<this.Radius},i.prototype.ContainsPoint=function(n){return this.Position.Distance(n).Magnitude()<this.Radius},i}(t.Bounds2d);t.BoundingCircle=i})(n.BoundingObject||(n.BoundingObject={}));var t=n.BoundingObject})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(t){var i=function(t){function i(i,r){t.call(this),this._type="BoundingRectangle",this.Size=typeof r!="undefined"?new n.Assets.Size2d(i,r):i}return __extends(i,t),i.prototype.Vertices=function(){return[this.TopLeft(),this.TopRight(),this.BotLeft(),this.BotRight()]},i.prototype.TopLeft=function(){var t=new n.Assets.Vector2d(this.Position.X-this.Size.HalfWidth(),this.Position.Y-this.Size.HalfHeight());return this.Rotation===0?t:t.RotateAround(this.Position,this.Rotation)},i.prototype.TopRight=function(){var t=new n.Assets.Vector2d(this.Position.X+this.Size.HalfWidth(),this.Position.Y-this.Size.HalfHeight());return this.Rotation===0?t:t.RotateAround(this.Position,this.Rotation)},i.prototype.BotLeft=function(){var t=new n.Assets.Vector2d(this.Position.X-this.Size.HalfWidth(),this.Position.Y+this.Size.HalfHeight());return this.Rotation===0?t:t.RotateAround(this.Position,this.Rotation)},i.prototype.BotRight=function(){var t=new n.Assets.Vector2d(this.Position.X+this.Size.HalfWidth(),this.Position.Y+this.Size.HalfHeight());return this.Rotation===0?t:t.RotateAround(this.Position,this.Rotation)},i.prototype.IntersectsCircle=function(n){return n.IntersectsRectangle(this)},i.prototype.IntersectsRectangle=function(t){var i;if(this.Rotation===0&&t.Rotation===0){var r=this.TopLeft(),u=this.BotRight(),f=t.TopLeft(),e=t.BotRight();return f.X<=u.X&&e.X>=r.X&&f.Y<=u.Y&&e.Y>=r.Y}if(t.Position.Distance(this.Position).Magnitude()<=t.Size.Radius()+this.Size.Radius()){var o=[this.TopRight().Subtract(this.TopLeft()),this.TopRight().Subtract(this.BotRight()),t.TopLeft().Subtract(t.BotLeft()),t.TopLeft().Subtract(t.TopRight())],l=this.Vertices(),a=t.Vertices();for(i=0;i<o.length;i++){var s=o[i],h=n.Assets.Vector2dHelpers.GetMinMaxProjections(s,l),c=n.Assets.Vector2dHelpers.GetMinMaxProjections(s,a);if(c.Max<h.Min||h.Max<c.Min)return!1}return!0}return!1},i.prototype.ContainsPoint=function(n){var r=this.Rotation,t,i;return this.Rotation!==0&&(this.Rotation=0,n=n.RotateAround(this.Position,-r)),t=this.TopLeft(),i=this.BotRight(),this.Rotation=r,n.X<=i.X&&n.X>=t.X&&n.Y<=i.Y&&n.Y>=t.Y},i}(t.Bounds2d);t.BoundingRectangle=i})(n.BoundingObject||(n.BoundingObject={}));var t=n.BoundingObject})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var i,r,u,f,t;(function(n){n._map=[],n._map[0]="butt",n.butt=0,n._map[1]="round",n.round=1,n._map[2]="square",n.square=2})(n.LineCapType||(n.LineCapType={})),i=n.LineCapType,function(n){n._map=[],n._map[0]="bevel",n.bevel=0,n._map[1]="round",n.round=1,n._map[2]="miter",n.miter=2}(n.LineJoinType||(n.LineJoinType={})),r=n.LineJoinType,function(n){n._map=[],n._map[0]="center",n.center=0,n._map[1]="end",n.end=1,n._map[2]="left",n.left=2,n._map[3]="right",n.right=3,n._map[4]="start",n.start=4}(n.TextAlignType||(n.TextAlignType={})),u=n.TextAlignType,function(n){n._map=[],n._map[0]="alphabetic",n.alphabetic=0,n._map[1]="top",n.top=1,n._map[2]="hanging",n.hanging=2,n._map[3]="middle",n.middle=3,n._map[4]="ideographic",n.ideographic=4,n._map[5]="bottom",n.bottom=5}(n.TextBaselineType||(n.TextBaselineType={})),f=n.TextBaselineType,t=function(){function n(){this._type="Graphic2dState",this._cachedState={}}return n.prototype.StrokeStyle=function(n){return this.GetOrSetCache("strokeStyle",n)},n.prototype.FillStyle=function(n){return this.GetOrSetCache("fillStyle",n)},n.prototype.GlobalAlpha=function(n){return this.GetOrSetCache("globalAlpha",n)},n.prototype.LineWidth=function(n){return this.GetOrSetCache("lineWidth",n)},n.prototype.LineCap=function(n){return this.GetOrSetCache("lineCap",n)},n.prototype.LineJoin=function(n){return this.GetOrSetCache("lineJoin",n)},n.prototype.MiterLimit=function(n){return this.GetOrSetCache("miterLimit",n)},n.prototype.ShadowOffsetX=function(n){return this.GetOrSetCache("shadowOffsetX",n)},n.prototype.ShadowOffsetY=function(n){return this.GetOrSetCache("shadowOffsetY",n)},n.prototype.ShadowBlur=function(n){return this.GetOrSetCache("shadowBlur",n)},n.prototype.ShadowColor=function(n){return this.GetOrSetCache("shadowColor",n)},n.prototype.GlobalCompositeOperation=function(n){return this.GetOrSetCache("globalCompositeOperation",n)},n.prototype.Font=function(n){return this.GetOrSetCache("font",n)},n.prototype.TextAlign=function(n){return this.GetOrSetCache("textAlign",n)},n.prototype.TextBaseline=function(n){return this.GetOrSetCache("textBaseline",n)},n.prototype.SetContextState=function(n){for(var t in this._cachedState)n[t]=this._cachedState[t]},n.prototype.GetOrSetCache=function(n,t){return typeof t!="undefined"&&(this._cachedState[n]=t),this._cachedState[n]},n}(),n.Graphic2dState=t})(n.Graphics||(n.Graphics={}));var t=n.Graphics})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function t(t,i){this._type="Graphic2d",this.Position=t,this.Size=i,this.ZIndex=0,this.Rotation=0,this.State=new n.Graphic2dState}return t.prototype.StartDraw=function(n){n.save(),this.State.SetContextState(n),this.Rotation!==0&&(n.translate(this.Position.X,this.Position.Y),n.rotate(this.Rotation),n.translate(-this.Position.X,-this.Position.Y))},t.prototype.EndDraw=function(n){n.restore()},t.prototype.Draw=function(){},t}();n.Graphic2d=t})(n.Graphics||(n.Graphics={}));var t=n.Graphics})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){(function(t){var i=function(n){function t(t,i,r){n.call(this,t,i),this._type="Shape",this._fill=!1,this._stroke=!1,typeof r!="undefined"&&this.Color(r)}return __extends(t,n),t.prototype.Color=function(n){return this._fill=!0,this.State.FillStyle(n)},t.prototype.Border=function(n,t){return[this.BorderThickness(n),this.BorderColor(t)]},t.prototype.BorderThickness=function(n){return this.State.LineWidth(n)},t.prototype.BorderColor=function(n){return this._stroke=!0,this.State.StrokeStyle(n)},t.prototype.Shadow=function(n,t,i,r){return[this.ShadowX(n),this.ShadowY(t),this.ShadowColor(i),this.ShadowBlur(r)]},t.prototype.ShadowColor=function(n){return this._fill=!0,this.State.ShadowColor(n)},t.prototype.ShadowX=function(n){return this.State.ShadowOffsetX(n)},t.prototype.ShadowY=function(n){return this.State.ShadowOffsetY(n)},t.prototype.ShadowBlur=function(n){return this.State.ShadowBlur(n)},t.prototype.Opacity=function(n){return this.State.GlobalAlpha(n)},t.prototype.StartDraw=function(t){t.beginPath(),n.prototype.StartDraw.call(this,t)},t.prototype.EndDraw=function(t){this._fill&&t.fill(),this._stroke?t.stroke():t.closePath(),n.prototype.EndDraw.call(this,t)},t.prototype.BuildPath=function(){},t.prototype.Draw=function(n){this.StartDraw(n),this.BuildPath(n),this.EndDraw(n)},t}(n.Graphic2d);t.Shape=i})(n.Shapes||(n.Shapes={}));var t=n.Shapes})(n.Graphics||(n.Graphics={}));var t=n.Graphics})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(t){(function(t){var i=function(t){function i(i,r,u,f){t.call(this,new n.Assets.Vector2d(i,r),new n.Assets.Size2d(u*2,u*2),f),this._type="Circle",this._radius=u}return __extends(i,t),i.prototype.Radius=function(n){return typeof n!="undefined"&&(this._radius=n,this.Size.Width=this.Size.Height=n*2),this._radius},i.prototype.Draw=function(n){this.SyncSize(),t.prototype.Draw.call(this,n)},i.prototype.BuildPath=function(n){n.arc(this.Position.X,this.Position.Y,this._radius,0,Math.twoPI)},i.prototype.SyncSize=function(){var n=this._radius*2;n!==this.Size.Width?this.Radius(this.Size.Width/2):n!==this.Size.Height&&this.Radius(this.Size.Height/2)},i}(t.Shape);t.Circle=i})(t.Shapes||(t.Shapes={}));var i=t.Shapes})(n.Graphics||(n.Graphics={}));var t=n.Graphics})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(t){(function(t){var i=function(t){function i(i,r,u,f,e){t.call(this,new n.Assets.Vector2d(i,r),new n.Assets.Size2d(u,f),e),this._type="Rectangle"}return __extends(i,t),i.prototype.BuildPath=function(n){n.rect(this.Position.X-this.Size.HalfWidth(),this.Position.Y-this.Size.HalfHeight(),this.Size.Width,this.Size.Height)},i}(t.Shape);t.Rectangle=i})(t.Shapes||(t.Shapes={}));var i=t.Shapes})(n.Graphics||(n.Graphics={}));var t=n.Graphics})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={}))