var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},EndGate;(function(n){(function(n){(function(t){(function(i){var r=function(t){function r(r,u){t.call(this,r),this._camera=u,this._contextBuilder=new i.Camera2dCanvasContextBuilder(this._camera),this.OnRendererSizeChange.Bind(this._contextBuilder.UpdateCanvasCenter),this._contextBuilder.UpdateCanvasCenter(new n.Assets.Size2d(r.width,r.height)),this._bufferContext=this._contextBuilder.BuildFrom(this._bufferContext)}return __extends(r,t),r.prototype.Render=function(n){var i,r=this._camera.GetInverseDistanceScale();return this._bufferContext.save(),this._bufferContext.scale(r,r),i=t.prototype.Render.call(this,this.GetOnScreenRenderables(n)),this._bufferContext.restore(),i},r.prototype._ClearBuffer=function(){var n=this._camera.GetDistanceScale();this._bufferContext.unModifiedClearRect(0,0,this._bufferCanvas.width*n,this._bufferCanvas.height*n)},r.prototype.GetOnScreenRenderables=function(n){var r=[],i=this._camera.GetDistanceScale(),u=1/i,t;for(this._camera.Scale(i,i),t=0;t<n.length;t++)this._camera.Intersects(n[t].GetDrawBounds())&&r.push(n[t]);return this._camera.Scale(u,u),r},r}(t.Renderer2d);i.Camera2dRenderer=r})(t.Camera||(t.Camera={}));var i=t.Camera})(n.Rendering||(n.Rendering={}));var t=n.Rendering})(n.Core||(n.Core={}));var t=n.Core})(EndGate||(EndGate={}))