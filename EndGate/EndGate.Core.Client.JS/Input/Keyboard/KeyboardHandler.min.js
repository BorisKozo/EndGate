var EndGate;(function(n){(function(t){var i=function(){function i(){this._onPressCommands={},this._onDownCommands={},this._onUpCommands={},this.OnKeyPress=new n.EventHandler,this.OnKeyDown=new n.EventHandler,this.OnKeyUp=new n.EventHandler,this.Wire()}return i._keyboardCommandIds=0,i.prototype.OnCommandPress=function(n,t){return this.UpdateCache(n,t,this._onPressCommands)},i.prototype.OnCommandDown=function(n,t){return this.UpdateCache(n,t,this._onDownCommands)},i.prototype.OnCommandUp=function(n,t){return this.UpdateCache(n,t,this._onUpCommands)},i.prototype.UpdateCache=function(n,r,u){var f=new t.Assets.KeyboardCommand(n,r),e=i._keyboardCommandIds++;return f.OnDispose.Bind(function(){delete u[e]}),u[e]=f,f},i.prototype.Wire=function(){document.onkeypress=this.BuildKeyEvent(this._onPressCommands,this.OnKeyPress),document.onkeydown=this.BuildKeyEvent(this._onDownCommands,this.OnKeyDown),document.onkeyup=this.BuildKeyEvent(this._onUpCommands,this.OnKeyUp)},i.prototype.FocusingTextArea=function(n){var t;return(n.target?t=n.target:n.srcElement&&(t=n.srcElement),t.nodeType===3&&(t=t.parentNode),t.tagName==="INPUT"||t.tagName==="TEXTAREA")?!0:!1},i.prototype.BuildKeyEvent=function(n,i){var r=this;return function(u){var f,o=!0,e;if(!r.FocusingTextArea(u)){f=new t.KeyboardCommandEvent(u),i.Trigger(f);for(e in n)f.Matches(n[e])&&(n[e].Action(),u.preventDefault(),o=!1);return o}}},i}();t.KeyboardHandler=i})(n.Input||(n.Input={}));var t=n.Input})(EndGate||(EndGate={}))