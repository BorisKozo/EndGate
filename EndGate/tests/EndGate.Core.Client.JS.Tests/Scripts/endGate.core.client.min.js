var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},GameRunnerInstance,EndGate;(function(n){(function(n){var t=function(){function n(){this._type="GameTime",this.Now=new Date,this._start=this.Now.getTime()}return n.prototype.Update=function(){var n=new Date,t=n.getTime();this.Elapsed=t-this.Now.getTime(),this.Total=t-this._start,this.Now=n},n}();n.GameTime=t})(n.Core||(n.Core={}));var t=n.Core})(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function n(n,t){this._type="LooperCallback",this.Fps(n),this.Callback=t,this.LastTriggered=0}return n.prototype.Fps=function(n){return typeof n!="undefined"&&(this._fps=n,this.TriggerFrequency=this._fps!=0?1e3/this._fps:0),this._fps},n}();n.LooperCallback=t})(n.Utilities||(n.Utilities={}));var t=n.Utilities})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function n(){this._type="Event",this._actions=[]}return n.prototype.Bind=function(n){this._actions.push(n)},n.prototype.Unbind=function(n){for(var t=0;t<this._actions.length;t++)if(this._actions[t]===n){this._actions.splice(t,1);return}},n.prototype.Trigger=function(){for(var i=[],t,n=0;n<arguments.length-0;n++)i[n]=arguments[n+0];for(t=0;t<this._actions.length;t++)this._actions[t].apply(this,i)},n}();n.EventHandler=t})(n.Utilities||(n.Utilities={}));var t=n.Utilities})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function t(){this._type="Looper",this._running=!1,this._callbacks=[],this._loopTrigger=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,0)}}(),this.OnLoop=new n.EventHandler}return t.prototype.AddCallback=function(n){this._callbacks.push(n),this._callbacksModified=!0},t.prototype.RemoveCallback=function(n){for(var t=0;t<this._callbacks.length;t++)if(this._callbacks[t]===n){this._callbacksModified=!0,this._callbacks.splice(t,1);break}},t.prototype.Start=function(){this._running=!0,this._loopStartTime=(new Date).getTime(),this.Run()},t.prototype.Run=function(){var i=(new Date).getTime()-this._loopStartTime,r,n,t;if(that._running){for(that._callbacksModified=!1,t=0;t<that._callbacks.length;t++)if(n=that._callbacks[t],r=i-n.LastTriggered,r>=n.TriggerFrequency&&(n.LastTriggered=i,n.Callback(),that._callbacksModified))break;that._loopTrigger()}},t.prototype.Dispose=function(){for(var n=this._callbacks.length-1;n>=0;n--)this.RemoveCallback(this._callbacks[n]);this._callbacks=[],this._running=!1,this._callbacksModified=!0},t}();n.Looper=t})(n.Utilities||(n.Utilities={}));var t=n.Utilities})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){var t=function(){function n(n){this._defaultUpdateRate=40,this._updateRateSetter=n,this.UpdateRate(this._defaultUpdateRate)}return n.prototype.UpdateRate=function(n){if(typeof n!="undefined")this._updateRate=n,this._updateRateSetter(this._updateRate);else return this._updateRate},n}();n.GameConfiguration=t})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),Math.roundTo=function(n,t){var i=Math.pow(10,t);return Math.round(n*i)/i},function(n){(function(n){(function(n){var t=function(){function n(n,t){this._type="Vector2d",this.X=n||0,this.Y=t||0}return n.Zero=function(){return new n(0,0)},n.One=function(){return new n(1,1)},n.prototype.ProjectOnto=function(n){return n.Multiply(this.Dot(n)/n.Dot(n))},n.prototype.RotateAround=function(t,i,r){typeof r=="undefined"&&(r=2);var u=Math.cos(-i),f=Math.sin(-i);return new n(Math.roundTo(u*(this.X-t.X)-f*(this.Y-t.Y)+t.X,r),Math.roundTo(f*(this.X-t.X)+u*(this.Y-t.Y)+t.Y,r))},n.prototype.Apply=function(n){this.X=n(this.X),this.Y=n(this.Y)},n.prototype.Trigger=function(n){n(this.X),n(this.Y)},n.prototype.Normalized=function(){var t=this.Magnitude();return new n(this.X/t,this.Y/t)},n.prototype.Magnitude=function(){return Math.sqrt(this.X*this.X+this.Y*this.Y)},n.prototype.Length=function(){return this.Magnitude()},n.prototype.Dot=function(n){return n.X*this.X+n.Y*this.Y},n.prototype.Abs=function(){return new n(Math.abs(this.X),Math.abs(this.Y))},n.prototype.Sign=function(){return new n(this.X/Math.abs(this.X),this.Y/Math.abs(this.Y))},n.prototype.Distance=function(t){return new n(Math.abs(t.X-this.X),Math.abs(t.Y-this.Y))},n.prototype.Add=function(t){return t._type==="Vector2d"?new n(this.X+t.X,this.Y+t.Y):new n(this.X+t,this.Y+t)},n.prototype.Multiply=function(t){return t._type==="Vector2d"?new n(this.X*t.X,this.Y*t.Y):new n(this.X*t,this.Y*t)},n.prototype.Subtract=function(t){return t._type==="Vector2d"?new n(this.X-t.X,this.Y-t.Y):new n(this.X-t,this.Y-t)},n.prototype.SubtractFrom=function(t){return t._type==="Vector2d"?new n(t.X-this.X,t.Y-this.Y):new n(t-this.X,t-this.Y)},n.prototype.Divide=function(t){return t._type==="Vector2d"?new n(this.X/t.X,this.Y/t.Y):new n(this.X/t,this.Y/t)},n.prototype.DivideFrom=function(t){return t._type==="Vector2d"?new n(t.X/this.X,t.Y/this.Y):new n(t/this.X,t/this.Y)},n.prototype.Negate=function(){return new n(this.X*-1,this.Y*-1)},n.prototype.Equivalent=function(n){return this.X===n.X&&this.Y===n.Y},n.prototype.Clone=function(){return new n(this.X,this.Y)},n.prototype.toString=function(){return"("+this.X+", "+this.Y+")"},n}();n.Vector2d=t})(n.Assets||(n.Assets={}));var t=n.Assets})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(t){(function(t){var i=n.Core.Assets,r=function(){function n(){this.Position=i.Vector2d.Zero(),this.Rotation=0}return n.prototype.ContainsPoint=function(){throw new Error("This method is abstract!");},n.prototype.Intersects=function(n){if(n._type==="BoundingCircle")return this.IntersectsCircle(n);if(n._type==="BoundingRectangle")return this.IntersectsRectangle(n);throw new Error("Cannot intersect with unidentifiable object, must be BoundingCircle or BoundingRectangle");},n.prototype.IntersectsCircle=function(){throw new Error("This method is abstract!");},n.prototype.IntersectsRectangle=function(){throw new Error("This method is abstract!");},n}();t.Bounds2d=r})(t.BoundingObject||(t.BoundingObject={}));var i=t.BoundingObject})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(t){(function(t){var r=n.Core.Assets,i=function(){function n(n,t){this.At=n,this.With=t}return n}();t.CollisionData=i})(t.Collision||(t.Collision={}));var i=t.Collision})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(t){(function(t){var u=n.Core.BoundingObject,i=n.Core.Utilities,r=function(){function n(t){this._type="Collidable",this._disposed=!1,this.Bounds=t,this.ID=n._collidableIDs++,this.OnCollision=new i.EventHandler,this.OnDisposed=new i.EventHandler}return n._collidableIDs=0,n.prototype.IsCollidingWith=function(n){return this.Bounds.Intersects(n.Bounds)},n.prototype.Collided=function(n){this.OnCollision.Trigger(n)},n.prototype.Dispose=function(){if(this._disposed)throw new Error("Cannot dispose collidable twice.");else this._disposed=!0,this.OnDisposed.Trigger(this)},n}();t.Collidable=r})(t.Collision||(t.Collision={}));var i=t.Collision})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(t){(function(t){var i=n.Core.Utilities,r=function(){function n(){this._type="CollisionManager",this._collidables=[],this._enabled=!1,this.OnCollision=new i.EventHandler}return n.prototype.Monitor=function(n){var t=this;this._enabled=!0,n.OnDisposed.Bind(function(){t.Unmonitor(n)}),this._collidables.push(n)},n.prototype.Unmonitor=function(n){for(var t=0;t<this._collidables.length;t++)if(this._collidables[t].ID===n.ID){this._collidables.splice(t,1);break}},n.prototype.Update=function(){var n,i,r,u;if(this._enabled)for(r=0;r<this._collidables.length;r++)for(n=this._collidables[r],u=r+1;u<this._collidables.length;u++)i=this._collidables[u],n.IsCollidingWith(i)&&(n.Collided(new t.CollisionData(n.Bounds.Position.Clone(),i)),i.Collided(new t.CollisionData(i.Bounds.Position.Clone(),n)),this.OnCollision.Trigger(n,i))},n}();t.CollisionManager=r})(t.Collision||(t.Collision={}));var i=t.Collision})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){var t=function(){function t(){this._type="Game",this._gameTime=new n.GameTime,this.ID=t._gameIds++,this.CollisionManager=new n.Collision.CollisionManager,this.Configuration=new n.GameConfiguration(GameRunnerInstance.Register(this))}return t._gameIds=0,t.prototype.PrepareUpdate=function(){this._gameTime.Update(),this.CollisionManager.Update(this._gameTime),this.Update(this._gameTime)},t.prototype.Update=function(){},t.prototype.Dispose=function(){GameRunnerInstance.Unregister(this)},t}();n.Game=t})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){var t=function(){function t(){this._type="GameRunner",this._callbacks={},this._gameLoop=null,this._callbackCount=0}return t.prototype.Register=function(n){var t=this.CreateAndCacheCallback(n);return this.TryLoopStart(),this._gameLoop.AddCallback(t),this.CreateUpdateRateSetter(t)},t.prototype.Unregister=function(n){var t;this._callbacks[n.ID]&&(t=this._callbacks[n.ID],this._gameLoop.RemoveCallback(t),delete this._callbacks[n.ID],this._callbackCount--,this.TryLoopStop())},t.prototype.TryLoopStart=function(){this._callbackCount===1&&(this._gameLoop=new n.Utilities.Looper,this._gameLoop.Start())},t.prototype.TryLoopStop=function(){this._callbackCount===0&&this._gameLoop!=null&&(this._gameLoop.Dispose(),this._gameLoop=null)},t.prototype.CreateAndCacheCallback=function(t){var i=new n.Utilities.LooperCallback(0,function(){t.PrepareUpdate()});return this._callbacks[t.ID]=i,this._callbackCount++,i},t.prototype.CreateUpdateRateSetter=function(n){return function(t){n.Fps(t)}},t}();n.GameRunner=t})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),GameRunnerInstance=new EndGate.Core.GameRunner,function(n){(function(n){(function(n){var t=function(){function n(n,t){this._type="Size2d",this.Width=n||0,this.Height=typeof t!="undefined"?t:this.Width}return n.Zero=function(){return new n(0,0)},n.One=function(){return new n(1,1)},n.prototype.Radius=function(){return.5*Math.sqrt(this.Width*this.Width+this.Height*this.Height)},n.prototype.HalfWidth=function(){return this.Width/2},n.prototype.HalfHeight=function(){return this.Height/2},n.prototype.Apply=function(n){this.Width=n(this.Width),this.Height=n(this.Height)},n.prototype.Trigger=function(n){n(this.Width),n(this.Height)},n.prototype.Add=function(t){return t._type==="Size2d"?new n(this.Width+t.Width,this.Height+t.Height):t._type==="Vector2d"?new n(this.Width+t.X,this.Height+t.Y):new n(this.Width+t,this.Height+t)},n.prototype.Multiply=function(t){return t._type==="Size2d"?new n(this.Width*t.Width,this.Height*t.Height):t._type==="Vector2d"?new n(this.Width*t.X,this.Height*t.Y):new n(this.Width*t,this.Height*t)},n.prototype.Subtract=function(t){return t._type==="Size2d"?new n(this.Width-t.Width,this.Height-t.Height):t._type==="Vector2d"?new n(this.Width-t.X,this.Height-t.Y):new n(this.Width-t,this.Height-t)},n.prototype.SubtractFrom=function(t){return t._type==="Size2d"?new n(t.Width-this.Width,t.Height-this.Height):t._type==="Vector2d"?new n(t.X-this.Width,t.Y-this.Height):new n(t-this.Width,t-this.Height)},n.prototype.Divide=function(t){return t._type==="Size2d"?new n(this.Width/t.Width,this.Height/t.Height):t._type==="Vector2d"?new n(this.Width/t.X,this.Height/t.Y):new n(this.Width/t,this.Height/t)},n.prototype.DivideFrom=function(t){return t._type==="Size2d"?new n(t.Width/this.Width,t.Height/this.Height):t._type==="Vector2d"?new n(t.X/this.Width,t.Y/this.Height):new n(t/this.Width,t/this.Height)},n.prototype.Negate=function(){return new n(this.Width*-1,this.Height*-1)},n.prototype.Equivalent=function(n){return this.Width===n.Width&&this.Height===n.Height},n.prototype.Clone=function(){return new n(this.Width,this.Height)},n.prototype.toString=function(){return"("+this.Width+", "+this.Height+")"},n}();n.Size2d=t})(n.Assets||(n.Assets={}));var t=n.Assets})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function n(n,t){this.Min=n,this.Max=t}return n}();n.MinMax=t})(n.Assets||(n.Assets={}));var t=n.Assets})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(n){(function(n){var t=function(){function t(){}return t.GetMinMaxProjections=function(t,i){for(var u=i[0].ProjectOnto(t).Dot(t),e=u,o,r,f=1;f<i.length;f++)o=i[f],r=o.ProjectOnto(t).Dot(t),r<u?u=r:r>e&&(e=r);return new n.MinMax(u,e)},t}();n.Vector2dHelpers=t})(n.Assets||(n.Assets={}));var t=n.Assets})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(t){(function(t){var i=n.Core.Assets,r=function(n){function t(t){n.call(this),this._type="BoundingCircle",this.Radius=t}return __extends(t,n),t.ClosestTo=function(n,t,i){return n<t.X?t.X:n>i.X?i.X:n},t.prototype.Area=function(){return Math.PI*this.Radius*this.Radius},t.prototype.Circumfrence=function(){return 2*Math.PI*this.Radius},t.prototype.IntersectsCircle=function(n){return this.Position.Distance(n.Position).Length()<this.Radius+n.Radius},t.prototype.IntersectsRectangle=function(n){var r=n.Rotation===0?this.Position:this.Position.RotateAround(n.Position,-n.Rotation),u=new i.Vector2d(n.Position.X-n.Size.HalfWidth(),n.Position.Y-n.Size.HalfHeight()),f=new i.Vector2d(n.Position.X+n.Size.HalfWidth(),n.Position.Y+n.Size.HalfHeight()),e=new i.Vector2d(t.ClosestTo(r.X,u,f),t.ClosestTo(r.Y,u,f));return r.Distance(e).Magnitude()<this.Radius},t.prototype.ContainsPoint=function(n){return this.Position.Distance(n).Magnitude()<this.Radius},t}(t.Bounds2d);t.BoundingCircle=r})(t.BoundingObject||(t.BoundingObject={}));var i=t.BoundingObject})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),function(n){(function(t){(function(t){var i=n.Core.Assets,r=function(n){function t(t,r){n.call(this),this._type="BoundingRectangle",this.Size=typeof r!="undefined"?new i.Size2d(t,r):t}return __extends(t,n),t.prototype.Vertices=function(){return[this.TopLeft(),this.TopRight(),this.BotLeft(),this.BotRight()]},t.prototype.TopLeft=function(){var n=new i.Vector2d(this.Position.X-this.Size.HalfWidth(),this.Position.Y-this.Size.HalfHeight());return this.Rotation===0?n:n.RotateAround(this.Position,this.Rotation)},t.prototype.TopRight=function(){var n=new i.Vector2d(this.Position.X+this.Size.HalfWidth(),this.Position.Y-this.Size.HalfHeight());return this.Rotation===0?n:n.RotateAround(this.Position,this.Rotation)},t.prototype.BotLeft=function(){var n=new i.Vector2d(this.Position.X-this.Size.HalfWidth(),this.Position.Y+this.Size.HalfHeight());return this.Rotation===0?n:n.RotateAround(this.Position,this.Rotation)},t.prototype.BotRight=function(){var n=new i.Vector2d(this.Position.X+this.Size.HalfWidth(),this.Position.Y+this.Size.HalfHeight());return this.Rotation===0?n:n.RotateAround(this.Position,this.Rotation)},t.prototype.IntersectsCircle=function(n){return n.IntersectsRectangle(this)},t.prototype.IntersectsRectangle=function(n){var t;if(this.Rotation===0&&n.Rotation===0){var r=this.TopLeft(),u=this.BotRight(),f=n.TopLeft(),e=n.BotRight();return f.X<=u.X&&e.X>=r.X&&f.Y<=u.Y&&e.Y>=r.Y}if(n.Position.Distance(this.Position).Magnitude()<=n.Size.Radius()+this.Size.Radius()){var o=[this.TopRight().Subtract(this.TopLeft()),this.TopRight().Subtract(this.BotRight()),n.TopLeft().Subtract(n.BotLeft()),n.TopLeft().Subtract(n.TopRight())],l=this.Vertices(),a=n.Vertices();for(t=0;t<o.length;t++){var s=o[t],h=i.Vector2dHelpers.GetMinMaxProjections(s,l),c=i.Vector2dHelpers.GetMinMaxProjections(s,a);if(c.Max<h.Min||h.Max<c.Min)return!1}return!0}return!1},t.prototype.ContainsPoint=function(n){var r=this.Rotation,t,i;return this.Rotation!==0&&(this.Rotation=0,n=n.RotateAround(this.Position,-r)),t=this.TopLeft(),i=this.BotRight(),this.Rotation=r,n.X<=i.X&&n.X>=t.X&&n.Y<=i.Y&&n.Y>=t.Y},t}(t.Bounds2d);t.BoundingRectangle=r})(t.BoundingObject||(t.BoundingObject={}));var i=t.BoundingObject})(n.Core||(n.Core={}));var t=n.Core}(EndGate||(EndGate={})),Number.prototype._type="Number",String.prototype._type="String",Boolean.prototype._type="Boolean",Array.prototype._type="Array",Date.prototype._type="Date",Object.prototype._type="Object",Error.prototype._type="Error",window.readyForRender=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame}();
//@ sourceMappingURL=endGate.core.client.min.js.map